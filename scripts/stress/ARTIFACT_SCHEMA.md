# Stress Artifact Schema

This document defines the stress artifacts generated by nightly jobs and local stress runs.

## `stress-summary.json`

Aggregated result for `stress_mock_runtime` / soak script runs.

```json
{
  "total_runs": 120,
  "success": 120,
  "failure": 0,
  "timeout": 0,
  "success_rate": 1.0,
  "panic_count": 0,
  "warn_count": 0,
  "hard_limit_breaches": 0,
  "thresholds": {
    "fd_warn": 2048,
    "fd_hard": 4096,
    "thread_warn": 256,
    "thread_hard": 512,
    "rss_warn_kb": 1048576,
    "rss_hard_kb": 1572864
  },
  "metrics_jsonl": "target/stress-artifacts/soak-metrics.jsonl"
}
```

## `soak-metrics.jsonl`

Periodic process-health samples emitted by `scripts/stress/mock_daemon_soak.sh`.

```json
{
  "timestamp": "2026-02-13T00:00:00Z",
  "pid": 12345,
  "fd_count": 42,
  "thread_count": 9,
  "rss_kb": 152000,
  "running_task_count": 0,
  "pending_task_count": 0,
  "queue_depth": 0,
  "level": "ok"
}
```

## `mcp-background-agent-stress-summary.json`

Latency summary for MCP background-agent stress path.

```json
{
  "workers": 16,
  "loops_per_worker": 6,
  "total_calls": 192,
  "success_calls": 192,
  "latency_ms": {
    "p50": 12,
    "p95": 55,
    "p99": 102
  }
}
```

## Markdown Summaries

- `soak-summary.md`: short human-readable summary for soak runs.
- `mcp-background-agent-stress-summary.md`: short summary for MCP stress tests.

These markdown files are intended for CI artifact browsing and GitHub step summaries.
